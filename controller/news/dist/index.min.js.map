{"version":3,"sources":["index.js"],"names":["newsModel","require","module","exports","p","perPage","newsData","totalCount","pCount","regeneratorRuntime","async","_context","prev","next","parseInt","ctx","query","awrap","getData","sent","getTotal","Math","ceil","render","stop","detail","id","totalData","detailData","_context2","getTotalData","filter","v","data","_context3","massageData"],"mappings":"aAAA,IAAMA,UAAYC,QAAQ,sBAC1BC,OAAOC,QAAU,CADXH,MACW,SADCC,GACD,IAAAG,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAC,mBAAAC,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAAA,OAAVV,EAAPW,SAAiBC,EAAAC,MAAAZ,IAAA,EAAAC,EAAA,EAAAM,EAAAE,KAAA,EAAAJ,mBAAAQ,MAAAjB,UAAAkB,QAAAd,EAAAC,IAAA,KAAA,EAAA,OAAAC,EAAAK,EAAAQ,KAAAR,EAAAE,KAAA,EAAAJ,mBAAAQ,MAAAjB,UAAAoB,YAAA,KAAA,EAAA,OAAAb,EAAAI,EAAAQ,KAAAX,EAAAa,KAAAC,KAAAf,EAAAF,GAAAM,EAAAE,KAAA,GAAAJ,mBAAAQ,MAETF,EAAAQ,OAAA,mBAAA,CACInB,SAAAA,EACAC,OAAAA,EAEJD,EAAAA,KANS,KAAA,GAAA,IAAA,MAAA,OAAAO,EAAAa,WAAAC,OAAA,SAAAV,GAAA,IAAAW,EAAAC,EAAAC,EAAA,OAAAnB,mBAAAC,MAAA,SAAAmB,GAAA,OAAA,OAAAA,EAAAjB,KAAAiB,EAAAhB,MAAA,KAAA,EAAA,OAAAa,EAAAZ,SAAAC,EAAAC,MAAAU,KAAA,EAAAG,EAAAhB,KAAA,EAAAJ,mBAAAQ,MAAAjB,UAAA8B,gBAAA,KAAA,EAAA,OAOLxB,EAPKuB,EAAAV,KAAAS,EAAAD,EAAAI,OAAA,SAAAC,GAAA,OAAAA,EAAAN,IAAAA,IAAA,GAAAG,EAAAhB,KAAA,EAAAJ,mBAAAQ,MAAAF,EAAAQ,OAAA,oBAQcvB,CAcnB4B,WAAAA,KAtBK,KAAA,EAAA,IAAA,MAAA,OAAAC,EAAAL,WASLhB,WATK,SASIa,GATJ,IAAAY,EAAA,OAAAxB,mBAAAC,MAAA,SAAAwB,GAAA,OAAA,OAAAA,EAAAtB,KAAAsB,EAAArB,MAAA,KAAA,EAAA,OAAAqB,EAAArB,KAAA,EAAAJ,mBAAAQ,MAAAjB,UAAAmC,eAAA,KAAA,EAAAF,EAAAC,EAAAf,KAWLb,EAAAA,KAAAA,EAXK,KAAA,EAAA,IAAA,MAAA,OAAA4B,EAAAV","file":"index.min.js","sourcesContent":["const newsModel = require(\"../../service/news\")\r\nmodule.exports = {\r\n    async index(ctx){\r\n        // console.log(ctx.query)\r\n        let p = parseInt(ctx.query.p) || 1;\r\n        let perPage = 5;\r\n        // let pageCount = Math.ceil(JSON.parse(JSON.stringify(data)).length / perPage);\r\n        // ctx.body = \"新闻的主页\";\r\n        let newsData = await newsModel.getData(p,perPage);\r\n        let totalCount = await newsModel.getTotal();\r\n        let pCount = Math.ceil(totalCount / perPage);\r\n        await ctx.render(\"./news/index.pug\",{\r\n            newsData,\r\n            pCount,\r\n            p\r\n        })\r\n    },\r\n    async detail(ctx){\r\n        // ctx.body = \"新闻的详细页\";\r\n        let id = parseInt(ctx.query.id) || 1;\r\n        let totalData = await newsModel.getTotalData();\r\n        let detailData = totalData.filter(v=>v.id==id)[0];\r\n        await ctx.render(\"./news/detail.pug\",{\r\n            detailData\r\n        })\r\n    },\r\n    async getMassage(ctx){\r\n        let data  =  await newsModel.massageData();\r\n       //  console.log(rows);\r\n       ctx.body = data;\r\n       }\r\n}"]}