{"version":3,"sources":["index.js"],"names":["newsModel","require","module","exports","p","perPage","newsData","totalCount","pCount","regeneratorRuntime","async","_context","prev","next","parseInt","ctx","query","awrap","getData","sent","getTotal","Math","ceil","render","stop","detail","id","totalData","detailData","_context2","getTotalData","filter","v"],"mappings":"aAAA,IAAMA,UAAYC,QAAQ,sBAC1BC,OAAOC,QAAU,CADXH,MACW,SADCC,GACD,IAAAG,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAC,mBAAAC,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAAA,OAELT,EAAIU,SAASC,EAAIC,MAAMZ,IAAM,EAFlCD,EAAU,EAAAQ,EAAAE,KAAA,EAAAJ,mBAAAQ,MAAAjB,UAAAkB,QAAAd,EAAAC,IAAA,KAAA,EAAA,OAAAC,EAAAK,EAAAQ,KAAAR,EAAAE,KAAA,EAAAJ,mBAAAQ,MAAAjB,UAAAoB,YAAA,KAAA,EAAA,OAAAb,EAAAI,EAAAQ,KAAAX,EAAAa,KAAAC,KAAAf,EAAAF,GAAAM,EAAAE,KAAA,GAAAJ,mBAAAQ,MAAAF,EAAAQ,OAAA,mBAAA,CAELnB,SAAAA,EACAC,OAAAA,EAEJD,EAAAA,KALS,KAAA,GAAA,IAAA,MAAA,OAAAO,EAAAa,WAAAC,OAAA,SAAAV,GAAA,IAAAW,EAAAC,EAAAC,EAAA,OAAAnB,mBAAAC,MAAA,SAAAmB,GAAA,OAAA,OAAAA,EAAAjB,KAAAiB,EAAAhB,MAAA,KAAA,EAAA,OAAAa,EAAAZ,SAAAC,EAAAC,MAAAU,KAAA,EAAAG,EAAAhB,KAAA,EAAAJ,mBAAAQ,MAAAjB,UAAA8B,gBAAA,KAAA,EAAA,OAMLxB,EANKuB,EAAAV,KAAAS,EAAAD,EAAAI,OAAA,SAAAC,GAAA,OAAAA,EAAAN,IAAAA,IAAA,GAAAG,EAAAhB,KAAA,EAAAJ,mBAAAQ,MAAAF,EAAAQ,OAAA,oBAOcvB,CAcnB4B,WAAAA,KArBK,KAAA,EAAA,IAAA,MAAA,OAAAC,EAAAL","file":"index.min.js","sourcesContent":["const newsModel = require(\"../../service/news\")\r\nmodule.exports = {\r\n    async index(ctx){\r\n        let p = parseInt(ctx.query.p) || 1;\r\n        let perPage = 5;\r\n        // let pageCount = Math.ceil(JSON.parse(JSON.stringify(data)).length / perPage);\r\n        // ctx.body = \"新闻的主页\";\r\n        let newsData = await newsModel.getData(p,perPage);\r\n        let totalCount = await newsModel.getTotal();\r\n        let pCount = Math.ceil(totalCount / perPage);\r\n        await ctx.render(\"./news/index.pug\",{\r\n            newsData,\r\n            pCount,\r\n            p\r\n        })\r\n    },\r\n    async detail(ctx){\r\n        // ctx.body = \"新闻的详细页\";\r\n        let id = parseInt(ctx.query.id) || 1;\r\n        let totalData = await newsModel.getTotalData();\r\n        let detailData = totalData.filter(v=>v.id==id)[0];\r\n        await ctx.render(\"./news/detail.pug\",{\r\n            detailData\r\n        })\r\n    }\r\n}"]}