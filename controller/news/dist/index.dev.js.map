{"version":3,"sources":["index.js"],"names":["newsModel","require","module","exports","index","ctx","p","parseInt","query","perPage","getData","newsData","getTotal","totalCount","pCount","Math","ceil","render","detail","id","getTotalData","totalData","detailData","filter","v"],"mappings":";;AAAA,IAAMA,SAAS,GAAGC,OAAO,CAAC,oBAAD,CAAzB;;AACAC,MAAM,CAACC,OAAP,GAAiB;AACPC,EAAAA,KADO,iBACDC,GADC;AAAA;AAAA;AAAA;AAAA;AAAA;AAELC,YAAAA,CAFK,GAEDC,QAAQ,CAACF,GAAG,CAACG,KAAJ,CAAUF,CAAX,CAAR,IAAyB,CAFxB;AAGLG,YAAAA,OAHK,GAGK,CAHL,EAIT;AACA;;AALS;AAAA,4CAMYT,SAAS,CAACU,OAAV,CAAkBJ,CAAlB,EAAoBG,OAApB,CANZ;;AAAA;AAMLE,YAAAA,QANK;AAAA;AAAA,4CAOcX,SAAS,CAACY,QAAV,EAPd;;AAAA;AAOLC,YAAAA,UAPK;AAQLC,YAAAA,MARK,GAQIC,IAAI,CAACC,IAAL,CAAUH,UAAU,GAAGJ,OAAvB,CARJ;AAAA;AAAA,4CASHJ,GAAG,CAACY,MAAJ,CAAW,kBAAX,EAA8B;AAChCN,cAAAA,QAAQ,EAARA,QADgC;AAEhCG,cAAAA,MAAM,EAANA,MAFgC;AAGhCR,cAAAA,CAAC,EAADA;AAHgC,aAA9B,CATG;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAePY,EAAAA,MAfO,kBAeAb,GAfA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgBT;AACIc,YAAAA,EAjBK,GAiBAZ,QAAQ,CAACF,GAAG,CAACG,KAAJ,CAAUW,EAAX,CAAR,IAA0B,CAjB1B;AAAA;AAAA,4CAkBanB,SAAS,CAACoB,YAAV,EAlBb;;AAAA;AAkBLC,YAAAA,SAlBK;AAmBLC,YAAAA,UAnBK,GAmBQD,SAAS,CAACE,MAAV,CAAiB,UAAAC,CAAC;AAAA,qBAAEA,CAAC,CAACL,EAAF,IAAMA,EAAR;AAAA,aAAlB,EAA8B,CAA9B,CAnBR;AAAA;AAAA,4CAoBHd,GAAG,CAACY,MAAJ,CAAW,mBAAX,EAA+B;AACjCK,cAAAA,UAAU,EAAVA;AADiC,aAA/B,CApBG;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAjB","sourcesContent":["const newsModel = require(\"../../service/news\")\r\nmodule.exports = {\r\n    async index(ctx){\r\n        let p = parseInt(ctx.query.p) || 1;\r\n        let perPage = 5;\r\n        // let pageCount = Math.ceil(JSON.parse(JSON.stringify(data)).length / perPage);\r\n        // ctx.body = \"新闻的主页\";\r\n        let newsData = await newsModel.getData(p,perPage);\r\n        let totalCount = await newsModel.getTotal();\r\n        let pCount = Math.ceil(totalCount / perPage);\r\n        await ctx.render(\"./news/index.pug\",{\r\n            newsData,\r\n            pCount,\r\n            p\r\n        })\r\n    },\r\n    async detail(ctx){\r\n        // ctx.body = \"新闻的详细页\";\r\n        let id = parseInt(ctx.query.id) || 1;\r\n        let totalData = await newsModel.getTotalData();\r\n        let detailData = totalData.filter(v=>v.id==id)[0];\r\n        await ctx.render(\"./news/detail.pug\",{\r\n            detailData\r\n        })\r\n    }\r\n}"],"file":"index.dev.js"}