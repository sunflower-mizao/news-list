{"version":3,"sources":["index.js"],"names":["newsModel","require","module","exports","index","ctx","p","parseInt","query","perPage","getData","newsData","getTotal","totalCount","pCount","Math","ceil","render","detail","id","getTotalData","totalData","detailData","filter","v"],"mappings":";;AAAA,IAAMA,SAAS,GAAGC,OAAO,CAAC,oBAAD,CAAzB;;AACAC,MAAM,CAACC,OAAP,GAAiB;AACPC,EAAAA,KADO,iBACDC,GADC;AAAA;AAAA;AAAA;AAAA;AAAA;AAET;AACIC,YAAAA,CAHK,GAGDC,QAAQ,CAACF,GAAG,CAACG,KAAJ,CAAUF,CAAX,CAAR,IAAyB,CAHxB;AAILG,YAAAA,OAJK,GAIK,CAJL,EAKT;AACA;;AANS;AAAA,4CAOYT,SAAS,CAACU,OAAV,CAAkBJ,CAAlB,EAAoBG,OAApB,CAPZ;;AAAA;AAOLE,YAAAA,QAPK;AAAA;AAAA,4CAQcX,SAAS,CAACY,QAAV,EARd;;AAAA;AAQLC,YAAAA,UARK;AASLC,YAAAA,MATK,GASIC,IAAI,CAACC,IAAL,CAAUH,UAAU,GAAGJ,OAAvB,CATJ;AAAA;AAAA,4CAUHJ,GAAG,CAACY,MAAJ,CAAW,kBAAX,EAA8B;AAChCN,cAAAA,QAAQ,EAARA,QADgC;AAEhCG,cAAAA,MAAM,EAANA,MAFgC;AAGhCR,cAAAA,CAAC,EAADA;AAHgC,aAA9B,CAVG;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgBPY,EAAAA,MAhBO,kBAgBAb,GAhBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAiBT;AACIc,YAAAA,EAlBK,GAkBAZ,QAAQ,CAACF,GAAG,CAACG,KAAJ,CAAUW,EAAX,CAAR,IAA0B,CAlB1B;AAAA;AAAA,4CAmBanB,SAAS,CAACoB,YAAV,EAnBb;;AAAA;AAmBLC,YAAAA,SAnBK;AAoBLC,YAAAA,UApBK,GAoBQD,SAAS,CAACE,MAAV,CAAiB,UAAAC,CAAC;AAAA,qBAAEA,CAAC,CAACL,EAAF,IAAMA,EAAR;AAAA,aAAlB,EAA8B,CAA9B,CApBR;AAAA;AAAA,4CAqBHd,GAAG,CAACY,MAAJ,CAAW,mBAAX,EAA+B;AACjCK,cAAAA,UAAU,EAAVA;AADiC,aAA/B,CArBG;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAjB","sourcesContent":["const newsModel = require(\"../../service/news\")\r\nmodule.exports = {\r\n    async index(ctx){\r\n        // console.log(ctx.query)\r\n        let p = parseInt(ctx.query.p) || 1;\r\n        let perPage = 5;\r\n        // let pageCount = Math.ceil(JSON.parse(JSON.stringify(data)).length / perPage);\r\n        // ctx.body = \"新闻的主页\";\r\n        let newsData = await newsModel.getData(p,perPage);\r\n        let totalCount = await newsModel.getTotal();\r\n        let pCount = Math.ceil(totalCount / perPage);\r\n        await ctx.render(\"./news/index.pug\",{\r\n            newsData,\r\n            pCount,\r\n            p\r\n        })\r\n    },\r\n    async detail(ctx){\r\n        // ctx.body = \"新闻的详细页\";\r\n        let id = parseInt(ctx.query.id) || 1;\r\n        let totalData = await newsModel.getTotalData();\r\n        let detailData = totalData.filter(v=>v.id==id)[0];\r\n        await ctx.render(\"./news/detail.pug\",{\r\n            detailData\r\n        })\r\n    }\r\n}"],"file":"index.dev.js"}