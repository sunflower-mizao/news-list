"use strict";var adminModel=require("../../service/admin");module.exports={index:function(t){var n,r,a,s,o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=parseInt(t.query.p)||1,r=5,e.next=4,regeneratorRuntime.awrap(adminModel.getData(n,r));case 4:return a=e.sent,e.next=7,regeneratorRuntime.awrap(adminModel.getTotal());case 7:return s=e.sent,o=Math.ceil(s/r),e.next=11,regeneratorRuntime.awrap(t.render("./admin/admin.pug",{newsData:a,pCount:o,p:n}));case 11:case"end":return e.stop()}})},addData:function(t){var n,r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(adminModel.addData(t.request));case 2:n=e.sent,r=0<n.affectedRows?{info:"操作成功",status:1}:{info:"操作失败",status:0},t.body=r;case 5:case"end":return e.stop()}})},deleteData:function(t){var n,r;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=parseInt(t.query.id)||1,e.next=3,regeneratorRuntime.awrap(adminModel.deleteData(n));case 3:0<e.sent.affectedRows?r={info:"删除成功",status:1}:info={info:"删除失败",status:0},t.body=r;case 6:case"end":return e.stop()}})}};
//# sourceMappingURL=index.min.js.map
